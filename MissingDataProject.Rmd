---
title: "Missing Data Project"
author: "Karen Cao"
date: "2/1/2019"
output: pdf_document
---
```{r, include = FALSE}
library(dplyr)
library(lubridate)
```

```{r, include = FALSE}
# DV: DataValue -> TFR values
# IV: RecallLag
tfr.ini = read.csv(file = "tfr_data.csv", sep = ",")
tfr.ini$year = format(as.Date(format(date_decimal(tfr.ini$TimeMid), "%Y-%m-%d")), "%Y")

tfr.ini =
  tfr.ini %>%
  group_by(Country.or.area, year) %>%
  select(Country.or.area, year, DataValue, RecallLag) %>%
  summarise(DataValue = mean(DataValue), RecallLag = mean(RecallLag)) 

timeline = data_frame(year = rep(1950:2016, each = length(unique(tfr.ini$Country.or.area))))
timeline$Country.or.area = rep(unique(tfr.ini$Country.or.area), 67)

tfr = merge(x = timeline, y = tfr.ini, by = c("Country.or.area", "year"), all.x = TRUE)

# Add two categorical IVs: region & development
reg.dev = read.csv(file = "un_subregion.csv", sep = ",")
dat = merge(x = tfr, y = reg.dev, by = "Country.or.area")

write.csv(dat, file = "tfr_panel_data.csv")

rm(list = ls())

# Subset the data to include "India" ONLY
# Subset the data to include only data ranging from 1950 to 2016
dat = read.csv(file = "tfr_panel_data.csv", sep = ",") %>% 
  filter(year >= 1960, Country.or.area == "India")

# Add GDP as a continuous variable
gdp = read.csv(file.choose(), header = T, skip = 4, sep = ",") 
gdp = gdp %>%
  filter(Country.Name == "India")
names(gdp) = substring(names(gdp), 2)
gdp = as.data.frame(t(gdp))
gdp$year = row.names(gdp)

data = merge(x = dat, y = gdp, by = "year") %>%
  select(c(DataValue, year, RecallLag, V1))

rm(dat)
rm(gdp)


```

```{r}

# Add GDP
gdp = read.csv(file.choose(), header = T, skip = 4, sep = ",")


```

